{"mappings":"oeAAAA,EAAA,SCAA,IAAAC,EAAAD,EAAA,S,uCASA,IAAIE,EAAUC,EAAAC,QAAWC,KAJO,UAI0B,KAkE1D,SAASC,EAA8BC,EAAKC,GAC1C,MAAMC,EAAgBC,aAAaC,QAAQJ,GACrCK,EAAe,IAAIC,IAAIC,KAAKC,MAAMN,IAExC,IAAKA,EAAe,CAClB,MAAMO,EAAe,CAACR,GACtBE,aAAaO,QAAQV,EAAKO,KAAKI,UAAUF,GAC3C,CAEIP,IACGG,EAAaO,IAAIX,GACjBI,EAAaQ,OAAOZ,GADEI,EAAaS,IAAIb,GAE5CE,aAAaO,QAAQV,EAAKO,KAAKI,UAAU,IAAIN,KAEjD,CAEA,SAASU,EAAwCd,GAC/C,MAGMe,EAAiBb,aAAaC,QA1FN,UA0FuB,KAC/Ca,EAAgB,IAAIX,IAAIC,KAAKC,MAAMQ,IAEnCE,EAAiBf,aAAaC,QA5FN,UA4FuB,KAC/Ce,EAAgB,IAAIb,IAAIC,KAAKC,MAAMU,IAErCD,EAAcL,IAAIX,GACpBP,EAAA0B,KAAKC,kBAAkBC,YAAc,oBAErC5B,EAAA0B,KAAKC,kBAAkBC,YAAc,eAGnCH,EAAcP,IAAIX,GACpBP,EAAA0B,KAAKG,gBAAgBD,YAAc,oBAEnC5B,EAAA0B,KAAKG,gBAAgBD,YAAc,cAEvC,EAtGA,EAAAE,EAAAC,wBAAuB9B,GA4DvBD,EAAA0B,KAAKM,qBAAqBC,iBACxB,SA3DF,SAAqCC,GAInC,GAHAA,EAAEC,iBAGgB,QADAD,EAAEE,OAAOC,SAEzB,OAEF,MAAMC,EAAUJ,EAAEE,OAAOG,QAAQC,MAoBjC,SAASC,EAAyBP,GAChCA,EAAEC,iBAEF9B,EArC4B,QAqC2BiC,GACvDjB,EAAwCiB,GAExC,IAAII,EAAUxC,EAAAC,QAAWC,KAxCG,UAwC8B,MAC1D,EAAA0B,EAAAC,wBAAuBW,EACzB,CAEA,SAASC,EAAyBT,GAChCA,EAAEC,iBACF9B,EA7C4B,QA6C2BiC,GACvDjB,EAAwCiB,GAExC,MAAMM,EAAQ1C,EAAAC,QAAWC,KAhDG,UAgD8B,MAC1D,EAAA0B,EAAAC,wBAAuBa,EACzB,CApCA5C,EAAA0B,KAAKmB,eAAeC,UAAY,GAChC9C,EAAA0B,KAAKqB,qBAAqBD,UAAY,IAEtC,EAAAhB,EAAAkB,qBAAoBV,GAEpBtC,EAAA0B,KAAKuB,cAAcC,UAAUC,OAAO,gBACpCnD,EAAA0B,KAAK0B,QAAQF,UAAUC,OAAO,gBAE9B9B,EAAwCiB,GA8BxCtC,EAAA0B,KAAKC,kBAAkBM,iBAAiB,QAASQ,GACjDzC,EAAA0B,KAAKG,gBAAgBI,iBAAiB,QAASU,GAC/C3C,EAAA0B,KAAK2B,gBAAgBpB,iBAAiB,SACtC,WACEjC,EAAA0B,KAAKC,kBAAkB2B,oBACrB,QACAb,GAEFzC,EAAA0B,KAAKG,gBAAgByB,oBAAoB,QAASX,EACpD,GACF,IAmEA3C,EAAA0B,KAAK6B,oBAAoBtB,iBAAiB,SApB1C,SAAqCC,GACnCA,EAAEC,iBACF,MAAMO,EAAUxC,EAAAC,QAAWC,KAhHG,UAgH8B,KAC5DJ,EAAA0B,KAAKM,qBAAqBc,UAAY,IAEtC,EAAAhB,EAAAC,wBAAuBW,GACvB1C,EAAA0B,KAAK8B,kBAAkBN,UAAUC,OAAO,cACxCnD,EAAA0B,KAAK6B,oBAAoBL,UAAU9B,IAAI,aACzC,IAaApB,EAAA0B,KAAK8B,kBAAkBvB,iBAAiB,SAXxC,SAAmCC,GACjCA,EAAEC,iBACF,MAAMS,EAAQ1C,EAAAC,QAAWC,KAzHK,UAyH4B,KAC1DJ,EAAA0B,KAAKM,qBAAqBc,UAAY,IAEtC,EAAAhB,EAAAC,wBAAuBa,GACvB5C,EAAA0B,KAAK8B,kBAAkBN,UAAU9B,IAAI,cACrCpB,EAAA0B,KAAK6B,oBAAoBL,UAAUC,OAAO,aAC5C,I","sources":["src/library.js","src/scripts/library_gallery.js"],"sourcesContent":["import './scripts/buttons_themes';\nimport './scripts/library_gallery';\nimport './scripts/modal';\nimport './scripts/modal-team';\n","import { refs } from './refs';\nimport storageAPI from '../scripts/storageAPI';\nimport { renderMovieGalleryById } from '../scripts/all_api_request/api_response';\nimport { renderModalInfoById } from '../scripts/all_api_request/api_response';\n\nconst LOCAL_STORAGE_WATCH_KEY = 'watch';\nconst LOCAL_STORAGE_QUEUE_KEY = 'queue';\n\n//рендер початкової сторінки з кнопки watch\nlet watched = storageAPI.load(LOCAL_STORAGE_WATCH_KEY) || '[]';\nrenderMovieGalleryById(watched);\n\nfunction handleClickOnImgCardLibrary(e) {\n  e.preventDefault();\n\n  const handClick = e.target.nodeName;\n  if (handClick !== 'IMG') {\n    return;\n  }\n  const movieId = e.target.dataset.imgId;\n  refs.imageWrapperEl.innerHTML = '';\n  refs.filmDetailsWrapperEl.innerHTML = '';\n\n  renderModalInfoById(movieId);\n\n  refs.wraperModalEl.classList.remove('modal-hidden');\n  refs.modalEl.classList.remove('modal-hidden');\n\n  overviewLocalStorageOnIdContainsLibrary(movieId);\n\n  //відключення кнопок(можна залишити так, або так як було раніше)\n  // if (refs.btnWatchedLibraryEl.classList.contains('btn-active')) {\n  //   refs.btnModalQueueEl.style.display = 'none';\n  //   refs.btnModalWatchedEl.style.display = 'block';\n  // } else {\n  //   refs.btnModalWatchedEl.style.display = 'none';\n  //   refs.btnModalQueueEl.style.display = 'block';\n  // }\n\n  function handleBtnWatchModalClick(e) {\n    e.preventDefault();\n\n    updateLocalStorageListLibrary(LOCAL_STORAGE_WATCH_KEY, movieId);\n    overviewLocalStorageOnIdContainsLibrary(movieId);\n\n    let watched = storageAPI.load(LOCAL_STORAGE_WATCH_KEY) || '[]';\n    renderMovieGalleryById(watched);\n  }\n\n  function handleBtnQueueModalClick(e) {\n    e.preventDefault();\n    updateLocalStorageListLibrary(LOCAL_STORAGE_QUEUE_KEY, movieId);\n    overviewLocalStorageOnIdContainsLibrary(movieId);\n\n    const queue = storageAPI.load(LOCAL_STORAGE_QUEUE_KEY) || '[]';\n    renderMovieGalleryById(queue);\n  }\n  //клік на кнопки в модалці на сторінці my lubrary\n  refs.btnModalWatchedEl.addEventListener('click', handleBtnWatchModalClick);\n  refs.btnModalQueueEl.addEventListener('click', handleBtnQueueModalClick);\n  refs.closeBtnModalEl.addEventListener('click', removeEventListeners);\n  function removeEventListeners() {\n    refs.btnModalWatchedEl.removeEventListener(\n      'click',\n      handleBtnWatchModalClick\n    );\n    refs.btnModalQueueEl.removeEventListener('click', handleBtnQueueModalClick);\n  }\n}\n//клік на фільми на сторінуці my library\nrefs.galleryLibraryListEl.addEventListener(\n  'click',\n  handleClickOnImgCardLibrary\n);\n//перевірка чи є айдішка в стореджі\nfunction updateLocalStorageListLibrary(key, id) {\n  const loadAddedList = localStorage.getItem(key);\n  const parsedIdList = new Set(JSON.parse(loadAddedList));\n\n  if (!loadAddedList) {\n    const watchSetting = [id];\n    localStorage.setItem(key, JSON.stringify(watchSetting));\n  }\n\n  if (loadAddedList) {\n    if (!parsedIdList.has(id)) parsedIdList.add(id);\n    else parsedIdList.delete(id);\n    localStorage.setItem(key, JSON.stringify([...parsedIdList]));\n  }\n}\n//перевірка чи є айдішка тоді міняєм значення кнопки на відповідне\nfunction overviewLocalStorageOnIdContainsLibrary(id) {\n  const keyW = LOCAL_STORAGE_WATCH_KEY;\n  const keyQ = LOCAL_STORAGE_QUEUE_KEY;\n\n  const loadAddedListW = localStorage.getItem(keyW) || '[]';\n  const parsedIdListW = new Set(JSON.parse(loadAddedListW));\n\n  const loadAddedListQ = localStorage.getItem(keyQ) || '[]';\n  const parsedIdListQ = new Set(JSON.parse(loadAddedListQ));\n\n  if (parsedIdListW.has(id)) {\n    refs.btnModalWatchedEl.textContent = 'remove from watch';\n  } else {\n    refs.btnModalWatchedEl.textContent = 'add to watch';\n  }\n\n  if (parsedIdListQ.has(id)) {\n    refs.btnModalQueueEl.textContent = 'remove from queue';\n  } else {\n    refs.btnModalQueueEl.textContent = 'add to queue';\n  }\n}\n\n//btn id header queue and wached(кнопки в хедері)\nfunction handleWatchedHeaderBtnClick(e) {\n  e.preventDefault();\n  const watched = storageAPI.load(LOCAL_STORAGE_WATCH_KEY) || '[]';\n  refs.galleryLibraryListEl.innerHTML = '';\n\n  renderMovieGalleryById(watched);\n  refs.btnQueueLibraryEl.classList.remove('btn-active');\n  refs.btnWatchedLibraryEl.classList.add('btn-active');\n}\n\nfunction handleQueueHeaderBtnClick(e) {\n  e.preventDefault();\n  const queue = storageAPI.load(LOCAL_STORAGE_QUEUE_KEY) || '[]';\n  refs.galleryLibraryListEl.innerHTML = '';\n\n  renderMovieGalleryById(queue);\n  refs.btnQueueLibraryEl.classList.add('btn-active');\n  refs.btnWatchedLibraryEl.classList.remove('btn-active');\n}\n//логіка кліків на кнопки в зедері\nrefs.btnWatchedLibraryEl.addEventListener('click', handleWatchedHeaderBtnClick);\nrefs.btnQueueLibraryEl.addEventListener('click', handleQueueHeaderBtnClick);\n"],"names":["parcelRequire","$eIXe9","$9d473249d221a3de$var$watched","$ky5oN","default","load","$9d473249d221a3de$var$updateLocalStorageListLibrary","key","id","loadAddedList","localStorage","getItem","parsedIdList","Set","JSON","parse","watchSetting","setItem","stringify","has","delete","add","$9d473249d221a3de$var$overviewLocalStorageOnIdContainsLibrary","loadAddedListW","parsedIdListW","loadAddedListQ","parsedIdListQ","refs","btnModalWatchedEl","textContent","btnModalQueueEl","$jvkBQ","renderMovieGalleryById","galleryLibraryListEl","addEventListener","e","preventDefault","target","nodeName","movieId","dataset","imgId","handleBtnWatchModalClick","watched","handleBtnQueueModalClick","queue","imageWrapperEl","innerHTML","filmDetailsWrapperEl","renderModalInfoById","wraperModalEl","classList","remove","modalEl","closeBtnModalEl","removeEventListener","btnWatchedLibraryEl","btnQueueLibraryEl"],"version":3,"file":"library.46487c70.js.map"}